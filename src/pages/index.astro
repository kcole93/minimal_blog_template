---
import BaseLayout from '../layouts/BaseLayout.astro'
import PostPreview from '../components/PostPreview.astro'
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog')).sort(
  (a, b) => a.data.pubDate.valueOf() - b.data.pubDate.valueOf()
)
---

<BaseLayout title={SITE_TITLE} description='{SITE_DESCRIPTION}'>
  <section class='grid grid-cols-1 md:grid-cols-2 gap-4 p-4'>
    {posts.map((post) => <PostPreview post={post} />)}
  </section>
</BaseLayout>
